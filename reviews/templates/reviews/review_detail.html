{% extends "base.html" %}
{% load static %}

{% block title %}–ú–æ—è –æ—Ü–µ–Ω–∫–∞ —Ñ–∏–ª—å–º–∞{% endblock %}

{% block content %}
<main class="main-content">
  <section class="homepage-section">
    <div class="glass-card review-card">
      <div class="review-card__header">
        <h2 class="review-card__title">{{ review.film.title }}</h2>
        <span class="review-card__updated">
          –æ–±–Ω–æ–≤–ª–µ–Ω–æ {{ review.updated_at|date:"d.m.Y" }}
        </span>
      </div>

      <div class="review-card__body">
        <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å -->
        <div class="review-card__poster">
          {% if review.film.poster_path %}
            <img src="https://image.tmdb.org/t/p/w342{{ review.film.poster_path }}"
              alt="{{ review.film.title }}">
          {% else %}
            <div class="film-detail__no-poster">üé¨</div>
          {% endif %}

          <div class="review-card__rating-badge">
            {{ review.user_rating|floatformat:1 }}
          </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å -->
        <div class="review-card__info">
          <div class="review-meta">
            <div><span>–î–∞—Ç–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</span>{{ review.watched_at|date:"d.m.Y" }}</div>
            <div><span>–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</span>{{ review.number_of_views|default:1 }}</div>
          </div>

          <div class="review-scores mt-2">
            <div class="score-row">
              <span>–°—Ü–µ–Ω–∞—Ä–∏–π, —Å—é–∂–µ—Ç</span>
              <span>{{ review.plot_rating }} / 10</span>
            </div>
            <div class="score-row">
              <span>–ê–∫—Ç—ë—Ä—Å–∫–∞—è –∏–≥—Ä–∞</span>
              <span>{{ review.acting_rating }} / 10</span>
            </div>
            <div class="score-row">
              <span>–†–µ–∂–∏—Å—Å–µ—Ä—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞</span>
              <span>{{ review.directing_rating }} / 10</span>
            </div>
            <div class="score-row">
              <span>–í–∏–∑—É–∞–ª, –∞—Ç–æ–º–æ—Å—Ñ–µ—Ä–∞</span>
              <span>{{ review.visuals_rating }} / 10</span>
            </div>
            <div class="score-row">
              <span>–ê—É–¥–∏–æ—ç—Ñ—Ñ–µ–∫—Ç—ã, —Å–∞—É–Ω–¥—Ç—Ä–µ–∫</span>
              <span>{{ review.soundtrack_rating }} / 10</span>
            </div>
          </div>

          <div class="review-text mt-2">
            <h4>–ú–æ–π –æ—Ç–∑—ã–≤</h4>
            <p>{{ review.review|default:"‚Äî" }}</p>
          </div>

        </div>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∞ -->
      <div class="review-card__footer">
        <a class="auth-btn auth-btn--primary"
           href="{% url 'reviews:review_update' pk=review.pk %}">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
        </a>
        <a class="auth-btn auth-btn--primary"
           href="{% if request.META.HTTP_REFERER %}{{ request.META.HTTP_REFERER }}{% else %}{% url 'films:home' %}{% endif %}">
          ‚Üê –ù–∞–∑–∞–¥
        </a>
      </div>

    </div>
  </section>
</main>
{% endblock %}
