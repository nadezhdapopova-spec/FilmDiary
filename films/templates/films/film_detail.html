{% extends "base.html" %}
{% load static %}

{% block title %}–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ñ–∏–ª—å–º–µ{% endblock %}

{% block content %}
<main class="main-content">
  <section class="homepage-section">
    <div class="glass-card">
      <div class="card-header">
        <h2 class="card-title">{{ film.title }}</h2>
      </div>

      <div class="card-body">
        <div class="film-detail">
          <div class="film-detail__poster-section">
            <!-- –ü–æ—Å—Ç–µ—Ä -->
            <div class="film-detail__poster">
              {% if film.poster_url %}
                <img src="https://image.tmdb.org/t/p/w342{{ film.poster_url }}"
                     alt="{{ film.title }}"
                     class="film-detail__poster-img">
              {% else %}
                <div class="film-detail__no-poster">üé¨</div>
              {% endif %}
            </div>

            <div class="film-rating__info">
              <p><strong>–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ –Ω–∞ TMDB:</strong> {{ film.rating|default:"‚Äî" }}</p>
              <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ü–µ–Ω–æ–∫:</strong> {{ film.vote_count|default:"‚Äî" }}</p>
            </div>
          </div>

          <div class="film-detail__info">
            <p><strong>–ì–æ–¥:</strong> {{ film.release_year|default:"‚Äî" }}</p>
            <p><strong>–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:</strong> {{ film.original_title|default:"‚Äî" }}</p>
            <p><strong>–ñ–∞–Ω—Ä—ã:</strong>
              {% if film.genres %}
                {{ film.genres|join:", " }}
              {% else %}‚Äî{% endif %}
            </p>
            <p><strong>–°–ª–æ–≥–∞–Ω:</strong> {{ film.tagline|default:"‚Äî" }}</p>
            <p><strong>–†–µ–∂–∏—Å—Å—ë—Ä:</strong>
              {% if film.director %}
                {{ film.director|join:", " }}
              {% else %}
                ‚Äî
              {% endif %}
            </p>
            <p><strong>–°—Ü–µ–Ω–∞—Ä–∏—Å—Ç:</strong>
              {% if film.writer %}
                {{ film.writer|join:", " }}
              {% else %}
                ‚Äî
              {% endif %}
            </p>
            <p><strong>–ü—Ä–æ–¥—é—Å–µ—Ä:</strong>
              {% if film.producer %}
                {{ film.producer|join:", " }}
              {% else %}
                ‚Äî
              {% endif %}
            </p>
            <p class="mt-3" align="justify"><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> {{ film.overview|default:"–û–ø–∏—Å–∞–Ω–∏–µ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç" }}</p>
            <p class="mt-4"><strong>–°—Ç—Ä–∞–Ω–∞:</strong> {{ film.original_country|default:"‚Äî" }}</p>
            <p><strong>–ë—é–¥–∂–µ—Ç:</strong> {{ film.budget|default:"‚Äî" }}</p>
            <p><strong>–ú–∏—Ä–æ–≤—ã–µ —Å–±–æ—Ä—ã:</strong> {{ film.revenue|default:"‚Äî" }}</p>
            <p><strong>–î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞:</strong> {{ film.release_date|default:"‚Äî" }}</p>
            <p><strong>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong> {{ film.runtime|default:"‚Äî" }} –º–∏–Ω.</p>
          </div>
        </div>

        {% if film.actors %}
          <div class="film-detail__cast">
            <h4 class="cast-title">–í –≥–ª–∞–≤–Ω—ã—Ö —Ä–æ–ª—è—Ö</h4>
            <div class="cast-grid cast-grid--3">
              <!-- 1-—è –∫–æ–ª–æ–Ω–∫–∞ -->
              <div class="cast-column">
                <ul class="cast-list">
                  {% for actor in film.actors|slice:":4" %}
                    <li class="cast-item">
                      {% if actor.photo %}
                        <img src="https://image.tmdb.org/t/p/w92{{ actor.photo }}"
                             alt="{{ actor.name }}"
                             class="cast-photo">
                      {% endif %}
                      <div class="cast-info">
                        <strong>{{ actor.name }}</strong>
                        {% if actor.character %}
                          <span class="cast-role">{{ actor.character }}</span>
                        {% endif %}
                      </div>
                    </li>
                  {% endfor %}
                </ul>
              </div>

              <!-- 2-—è –∫–æ–ª–æ–Ω–∫–∞ -->
              <div class="cast-column">
                <ul class="cast-list">
                  {% for actor in film.actors|slice:"4:8" %}
                    <li class="cast-item">
                      {% if actor.photo %}
                        <img src="https://image.tmdb.org/t/p/w92{{ actor.photo }}"
                             alt="{{ actor.name }}"
                             class="cast-photo">
                      {% endif %}
                      <div class="cast-info">
                        <strong>{{ actor.name }}</strong>
                        {% if actor.character %}
                          <span class="cast-role">{{ actor.character }}</span>
                        {% endif %}
                      </div>
                    </li>
                  {% endfor %}
                </ul>
              </div>

              <!-- 3-—è –∫–æ–ª–æ–Ω–∫–∞ -->
              <div class="cast-column">
                <ul class="cast-list">
                  {% for actor in film.actors|slice:"8:12" %}
                    <li class="cast-item">
                      {% if actor.photo %}
                        <img src="https://image.tmdb.org/t/p/w92{{ actor.photo }}"
                             alt="{{ actor.name }}"
                             class="cast-photo">
                      {% endif %}
                      <div class="cast-info">
                        <strong>{{ actor.name }}</strong>
                        {% if actor.character %}
                          <span class="cast-role">{{ actor.character }}</span>
                        {% endif %}
                      </div>
                    </li>
                  {% endfor %}
                </ul>
              </div>
            </div>

            <div class="mt-4 text-center">
              <a class="auth-btn auth-btn--primary"
                 href="{% if request.META.HTTP_REFERER %}{{ request.META.HTTP_REFERER }}{% else %}{% url 'films:home' %}{% endif %}">
                 ‚Üê –ù–∞–∑–∞–¥
              </a>
            </div>
          </div>
        </div>
      {% endif %}

    </div>
  </section>
</main>
{% endblock %}
